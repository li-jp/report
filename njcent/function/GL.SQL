CREATE OR REPLACE FUNCTION GL(USERID IN VARCHAR2, D IN DATE DEFAULT LAST_DAY(VIEW_DATE.GET_DATE))
  RETURN INTEGER IS
  JOINDATE DATE;
  RESULT   INTEGER;
BEGIN
  SELECT U.INDUCTION_TIME
  INTO   JOINDATE
  FROM   SYS_USER U
  WHERE  U.ID = USERID;

  IF JOINDATE IS NULL
  THEN
    RESULT := -1;
  ELSE
    RESULT := NVL(FLOOR(MONTHS_BETWEEN(D, JOINDATE) / 12), 0);
  END IF;
  RETURN(RESULT);
END GL;
